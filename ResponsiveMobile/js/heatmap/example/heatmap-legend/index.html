<!doctype html><html lang=en><meta charset=utf-8><title>Legend Example (DOM Legends) | heatmap.js</title><style>body,html,h2{margin:0;padding:0;height:100%}body{font-family:sans-serif}body *{font-weight:200}#heatmapContainerWrapper{width:100%;height:100%;position:absolute;background:rgba(0,0,0,.1)}#heatmapContainer{width:100%;height:100%}#heatmapLegend{background:#fff;position:absolute;bottom:0;right:0;padding:10px}#min{float:left}#max{float:right}h1{position:absolute;background:#000;color:#fff;padding:10px;font-weight:200}#all-examples-info{position:absolute;background:#fff;font-size:16px;padding:20px;top:100px;width:350px;line-height:150%;border:1px solid rgba(0,0,0,.2)}</style><div id=heatmapContainerWrapper><div id=heatmapContainer></div><div id=heatmapLegend><h2>Descriptive Legend Title</h2><span id=min></span><span id=max></span><img id=gradient src style=width:100%></div></div><h1>Adding a custom legend to heatmap.js</h1><div id=all-examples-info><strong style=font-weight:700;line-height:200%;font-size:18px>Looking for more examples?</strong><br>Check out the full <a href="http://www.patrick-wied.at/static/heatmapjs/examples.html?utm_source=gh_local" target=_blank>list of all heatmap.js examples</a> with more pointers &amp; inline documentation.</div><script src=../../src/heatmap.js></script><script>window.onload=function(){function $(id){return document.getElementById(id);};var legendCanvas=document.createElement('canvas');legendCanvas.width=100;legendCanvas.height=10;var legendCtx=legendCanvas.getContext('2d');var gradientCfg={};function updateLegend(data){$('min').innerHTML=data.min;$('max').innerHTML=data.max;if(data.gradient!=gradientCfg){gradientCfg=data.gradient;var gradient=legendCtx.createLinearGradient(0,0,100,1);for(var key in gradientCfg){gradient.addColorStop(key,gradientCfg[key]);}
legendCtx.fillStyle=gradient;legendCtx.fillRect(0,0,100,10);$('gradient').src=legendCanvas.toDataURL();}};var heatmap=h337.create({container:document.getElementById('heatmapContainer'),maxOpacity:.5,radius:10,blur:.75,onExtremaChange:function onExtremaChange(data){updateLegend(data);}});var width=(+window.getComputedStyle(document.body).width.replace(/px/,''));var height=(+window.getComputedStyle(document.body).height.replace(/px/,''));var generate=function(){var extremas=[(Math.random()*1000)>>0,(Math.random()*1000)>>0];var max=Math.max.apply(Math,extremas);var min=Math.min.apply(Math,extremas);var t=[];for(var i=0;i<1000;i++){var x=(Math.random()*width)>>0;var y=(Math.random()*height)>>0;var c=((Math.random()*max-min)>>0)+min;var r=(Math.random()*80)>>0;t.push({x:x,y:y,value:c,radius:r});}
var init=+new Date;heatmap.setData({min:min,max:max,data:t});console.log('took ',(+new Date)-init,'ms');};generate();document.getElementById('heatmapContainerWrapper').onclick=function(){generate();};};</script>